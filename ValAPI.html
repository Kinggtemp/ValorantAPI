<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Valorant Agents</title>
    <link rel="stylesheet" href="ValAPI.css">

</head>
<script>
    async function getAgents() {
        try {
            //let response = await fetch('https://valorant-api.com/v1/agents/0e38b510-41a8-5780-5e8f-568b2a4f2d6c/');
            let response = await fetch('http://localhost:8081/agents/Killjoy');
            let agent = await response.json();
            document.getElementById("agentName").innerHTML = (agent.displayName);
            document.getElementById("description").innerHTML = (agent.description);
            document.getElementById("displayIcon").src = (agent.displayIcon);
            agent.abilities.forEach(ability => {
                document.getElementById("ability1").innerHTML += (ability.slot + "<br>" + ability.displayIcon + "<br>" + ability.displayName + "<br>" + ability.description + "<br>");
            });
        }
        catch (e) {
            console.log(e);
        }
    }
    getAgents();
</script>


<body>

    <h2 id="agentName"></h2>

    <div id="description"></div>
    <img id="displayIcon">



    <div id="ability1"></div>

    <div class="dropdown">
    <select id="agents">
        <option value="">Select agents...</option>
      </select>

      <label for="agentnames">Choose an agent</label>
<select name="agentnames" id="agentnames">
    <option value="Select agents">Select agents...</option>
  <option value="Gekko">Gekko</option>
  <option value="pumpernickel">Pumpernickel</option>
  <option value="reeses">Reeses</option>
</select>
    </div>

</body>

<script>
document.getElementById('addAgentForm').addEventListener('submit', async (event) => {
    event.preventDefault(); 
    const formData = new FormData(event.target);
    const agentData = {};
    formData.forEach((value, key) => {
        agentData[key] = value;
    });
    try {
          const response = await fetch('agents.json', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(agentData)
        });
        if (response.ok) {
            alert('Agent added successfully!');

        } else {
            throw new Error('Failed to add agent');
        }
    } catch (error) {
        console.error('Error adding agent:', error);
    }
});
</script>